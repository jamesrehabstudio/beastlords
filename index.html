<!doctype html>
<html>
<head>
	<title>Zombie Town</title>
	<meta name="description" content="A HTML 5 dom game" />
	<link rel="stylesheet" href="css/style.css">
	
	<script src="js/jquery.js"></script>
	<script src="js/game.js" type="text/javascript"></script>
	<script src="js/queue.js" type="text/javascript"></script>
	<script src="js/data.js" type="text/javascript"></script>
	<script src="js/polygons.js" type="text/javascript"></script>
	<script src="js/input.js" type="text/javascript"></script>
	<script src="js/platformer.js" type="text/javascript"></script>
</head>
<body>
	
	<div class="wrap">
		<!--<canvas id="game" width="256" height="240"></canvas>-->
		<canvas id="game" width="512" height="480"></canvas>
		
		<div>
			<div class="field volume">
				<label>Sound effects volume</label>
				<select name="sfxvolume">
					<option value=0.0>Off</option>
					<option value=0.3>Low</option>
					<option value=0.8 selected>High</option>
				</select>
			</div>
			<div class="field volume">
				<label>Music volume</label>
				<select name="musvolume">
					<option value=0.0>Off</option>
					<option value=0.3 selected>Low</option>
					<option value=0.8>High</option>
				</select>
			</div>
			<div class="field volume">
				<label>Reset</label>
				<button name="reset">Reset</button>
			</div>
		</div>
		
		<h2 id = "how">How to play</h2>
		
		<div>
			<img src="/img/controls.png" alt="controls" />
		</div>
		
		<p>Destroy this temple's Caput Anguli.</p>
	</div>	
	
	<script>
	window.onload = function() {
		window.dataManager = new DataManager();
		window.input = new Input();
		
		window.game = new Game( document.getElementById( 'game' ) );
		dataManager.randomLevel(game,0);
		
		//game.buildPaths();
		loop();
		
		$("select[name=sfxvolume]").on("change",function(e){
			audio.sfxVolume.gain.value = this.value - 0;
		});
		$("select[name=musvolume]").on("change",function(e){
			audio.musVolume.gain.value = this.value - 0;
		});
		$("button[name=reset]").on("click",function(e){
			dataManager.reset();
			dataManager.randomLevel(game,0);
		});
	}
	</script>
</body>